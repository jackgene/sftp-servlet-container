apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = 1.5
version = '0.0-SNAPSHOT'
jar {
    baseName = 'coyote-sftp'
}

repositories {
    mavenCentral()
}

dependencies {
    ext.SLF4J_VERSION = '1.6.+'
    ext.TOMCAT_VERSION = '7.0.+'
    
    compile(
        "org.apache.sshd:sshd-core:0.6.0",
        "org.apache.tomcat:tomcat-coyote:${TOMCAT_VERSION}",
        "org.slf4j:slf4j-api:${SLF4J_VERSION}",
    )
    runtime(
        "org.apache.tomcat:tomcat-jasper:${TOMCAT_VERSION}",
    ) {
        exclude module: 'ecj'
    }
    runtime(
//        "org.apache.tomcat:jasper-jdt:${TOMCAT_VERSION}",
        "org.slf4j:slf4j-jdk14:${SLF4J_VERSION}",
        "javax.transaction:jta:1.1",
    )
    testCompile(
        "junit:junit:4.+",
    )
}

task runTestServer(type: JavaExec, depends: classes) {
    main = 'org.apache.catalina.startup.Catalina'
    args 'start'
    workingDir = project.projectDir.absolutePath + '/testServer'
    classpath configurations.runtime
    classpath sourceSets.main.output.classesDir
    classpath sourceSets.main.output.resourcesDir
}

task wrapper(type: Wrapper)
