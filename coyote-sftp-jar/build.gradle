apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = 1.5
version = '0.0-SNAPSHOT'
jar {
    baseName = 'coyote-sftp'
}

repositories {
    mavenCentral()
}

dependencies {
    compile(
        [group: 'org.apache.sshd', name: 'sshd-core', version: '0.6.0'],
        [group: 'org.apache.tomcat', name: 'coyote', version: '6.0.+'],
        [group: 'org.slf4j', name: 'slf4j-simple', version: '1.6.+']
    )
    runtime(
        [group: 'org.apache.tomcat', name: 'jasper', version: '6.0.+']
    ) {
        // TODO
        exclude module: 'ecj'
    }
    runtime(
        [group: 'org.apache.tomcat', name: 'jasper-jdt', version: '6.0.+'],
        [group: 'javax.transaction', name: 'jta', version: '1.1']
    )
    testCompile(
        [group: 'junit', name: 'junit', version: '4.+']
    )
}

task runTestServer(type: JavaExec, depends: classes) {
    main = 'org.apache.catalina.startup.Catalina'
    args 'start'
    workingDir = project.projectDir.absolutePath + '/testServer'
    classpath configurations.runtime
    classpath sourceSets.main.output.classesDir
    classpath sourceSets.main.output.resourcesDir
}

task wrapper(type: Wrapper)
